<!DOCTYPE html>
<html lang="en" id="html">
	<meta charset="UTF-8">
	<title>Page Title</title>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" href="../css/style.css">
	<style>
	</style>
	<script>
	</script>
	<body id="body">
		</div>
		<span id="cover"></span>
		<header>
			<img src="../img/logo.png">
			<div id="searcharea">
				<span id="categories-container">
					<h4 id="categories">Categories</h4>
				</span>
				<input id="searchbar" name="q" type="text" placeholder="Search the world!">
				<img id="search_btn" src="../img/search_black_24dp.svg">
				<img id="sort_btn" src="../img/sort_black_24dp.svg">
			</div>
		</header>
		<nav id="nav-sort">
			<h3>Sorting by</h3>
			<ul id="options-sort">
				<li class="active">Relevance</li>
				<li>Newest first</li>
				<li>Oldest first</li>
				<li>A-Z</li>
				<li>Z-A</li>
				<li>Price (Ascending)</li>
				<li>Price (Descending</li>
			</ul>
		</nav>
		<main id="main-search">
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Extra description to test ellipsis. Nice car, a lot of power, 5 seats with a manual transmission. This is text that should be hidden.</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('white_car');">
				<span class="img" style="background-image: url('../img/car.jpeg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Extra description to test ellipsis. Nice car, a lot of power, 5 seats with a manual transmission. This is text that should be hidden.</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('white_car');">
				<span class="img" style="background-image: url('../img/car.jpeg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Extra description to test ellipsis. Nice car, a lot of power, 5 seats with a manual transmission. This is text that should be hidden.</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('white_car');">
				<span class="img" style="background-image: url('../img/car.jpeg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Extra description to test ellipsis. Nice car, a lot of power, 5 seats with a manual transmission. This is text that should be hidden.</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('yellow_car');">
				<span class="img" style="background-image: url('../img/car.jpg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
			<span onclick="javascript: openItem('white_car');">
				<span class="img" style="background-image: url('../img/car.jpeg');"></span>
				<p>Nice car, a lot of power, 5 seats with a manual transmission</p>
				<span><h4>300 kr</h4><h4>by Vigor T</h4></span>
			</span>
		</main>
	</body>
	<script>
		function map(input, input_start, input_end, output_start, output_end) {
			return output_start + ((output_end - output_start) / (input_end - input_start)) * (input - input_start);
		}

		cover 		= document.getElementById("cover");
		searchbar 	= document.getElementById("searchbar");
		search_btn 	= document.getElementById("search_btn");
		sort_btn 	= document.getElementById("sort_btn");
		nav_sort	= document.getElementById("nav-sort");
		options_sort 	= document.getElementById("options-sort");

		function openItem(name) {
			cover.classList.remove("uncover_left");
			setTimeout(function() {
				window.location.href = "/item#name=" + name;
			}, 500);
		}

		function search_href() {
			val = searchbar.value;
			cover.classList.remove("uncover_left");
			setTimeout(function() {
				window.location.href = "/search#q=" + val;
			}, 500); // this function will be executed 500ms later
		}

		searchbar.addEventListener("keypress", event => {
			if (event.key === 'Enter') {
				search_href();
			}
		});

		search_btn.addEventListener("click", event => {
			search_href();
		});

		sort_btn.addEventListener("click", event => {
			nav_sort.classList.toggle("active");
		});

		window.onload = function(){
			cover.className = "";
			cover.classList.add("uncover_right");
		}
		var hashParams = window.location.hash.substr(1).split('&'); // substr(1) to remove the `#`
		for(var i = 0; i < hashParams.length; i++){ // iterate over values
			var p = hashParams[i].split('=');
			if (p[0] == "q") { // if we find the parameter "q", load that into the searchbar
				document.getElementById("searchbar").value = decodeURIComponent(p[1]);
				break; // we've found what we were looking for, exit the for loop
			}
		}
		
		for (var i = 0; i < options_sort.children.length; i++) {
			child = options_sort.children[i];
			child.addEventListener("click", event => {
				for (var i = 0; i < options_sort.children.length; i++) {
					child = options_sort.children[i];
					if (child != event.target)
						child.classList.remove("active");
				}
				event.target.classList.toggle("active");
				if (!event.target.classList.contains("active"))
					options_sort.children[0].classList.add("active");
			});
		}
	</script>
</html>

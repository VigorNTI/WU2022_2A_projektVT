<!DOCTYPE html>
<html lang="en" id="html">
	<meta charset="UTF-8">
	<title>Page Title</title>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" href="../css/style.css">
	<style>
	</style>
	<script>
	</script>
	<body id="body">
		<span id="cover"></span>
		<header>
			<img src="../img/logo.png">
			<div id="searcharea">
				<h4 id="categories">Categories</h4>
				<input id="searchbar" name="q" type="text" placeholder="Search the world!">
				<img id="search_btn" src="../img/search_black_24dp.svg">
			</div>
		</header>
		<nav id="nav-categories">
			<h3>Categories</h3>
			<ul id="categories_list">
				<li id="all_btn" class="active">All</li>
				<li>Cars</li>
				<li>Scooters</li>
				<li>Houses</li>
				<li>Food</li>
				<li>Sports</li>
				<li>Snacks</li>
				<li>Movies</li>
				<li>Games</li>
			</ul>
		</nav>
		<main id="main-search">
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpg"></span>
			<span><img src="../img/car.jpeg"></span>
			<span><img src="../img/car.jpg"></span>
		</main>
	</body>
	<script>
		function map(input, input_start, input_end, output_start, output_end) {
			return output_start + ((output_end - output_start) / (input_end - input_start)) * (input - input_start);
		}

		cover = document.getElementById("cover");
		searchbar = document.getElementById("searchbar");
		search_btn = document.getElementById("search_btn");
		categories_list = document.getElementById("categories_list");

		function search_href() {
			val = searchbar.value;
			cover.classList.remove("uncover_left");
			setTimeout(function() {
				window.location.href = "/search#q=" + val;
			}, 500) // this function will be executed 500ms later
		}

		searchbar.addEventListener("keypress", event => {
			if (event.key === 'Enter') {
				search_href();
			}
		});

		search_btn.addEventListener("click", event => {
			search_href();
		});

		window.onload = function(){
			cover.className = "";
			cover.classList.add("uncover_right");
		}
		var hashParams = window.location.hash.substr(1).split('&'); // substr(1) to remove the `#`
		for(var i = 0; i < hashParams.length; i++){ // iterate over values
			var p = hashParams[i].split('=');
			if (p[0] == "q") { // if we find the parameter "q", load that into the searchbar
				document.getElementById("searchbar").value = decodeURIComponent(p[1]);
				break; // we've found what we were looking for, exit the for loop
			}
		}
		
		for (var i = 0; i < categories_list.children.length; i++) {
			child = categories_list.children[i];
			child.addEventListener("click", event => {
				event.target.classList.toggle("active");
				if(event.target.id == "all_btn") {
					for (var i = 1; i < categories_list.children.length; i++) {
						child = categories_list.children[i];
						child.classList.remove("active");
					}
				} else {
					child = categories_list.children[0];
					child.classList.remove("active");
				}
			});
		}

	</script>
</html>
